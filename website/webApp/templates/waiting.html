{% extends "base.html" %}

{% block content %}
    <form action="" method="post">
        <h3 id="waiting">Ищем</h3>
    </form>
{% endblock %}
{% block script %}
    <script type=text/javascript src={{ url_for('static', filename='script/waiting.js') }}></script>
    {#    <script type=text/javascript>#}
    {#        let dots = 0;#}
    {##}
    {#        function update_values() {#}
    {#            let element = document.getElementById("waiting");#}
    {#            element.innerHTML = 'Ищем' + '.'.repeat(dots + 1);#}
    {#            $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};#}
    {#            $.getJSON($SCRIPT_ROOT + "/check", function (data) {#}
    {#                if (data.start_game) {#}
    {#                    element.innerHTML = 'Найден противник: ' + data;#}
    {#                    sleep(2500);#}
    {#                    window.location = $SCRIPT_ROOT + "/session/" + data.session;#}
    {#                }#}
    {#            });#}
    {#            dots = (dots + 1) % 3;#}
    {#            setTimeout(update_values, 1000);#}
    {#        }#}
    {##}
    {#        window.onload = update_values;#}
    {#    </script>#}
{% endblock %}
